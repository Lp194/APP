<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bucho Cheio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Open+Sans:ital,wght@0,400;0,700;1,400&family=Roboto:wght@500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="fontawesome/css/all.min.css">
</head>

<body class="main-bg">
    <aside class="menu">
        <section class="main-content menu-content">
            <a href="#" class="containerImage">
                <h1><img src="assets/img/logo.png" height="40" alt="logo"></h1>
            </a>
            <div class="search-bar">
                <div class="search-input-wrapper">
                    <i class="fa fa-search search-icon" onclick="search()"></i>
                    <input type="text" placeholder="Busque por um item" name="search" oninput="toggleClearIcon(this)"
                        onkeyup="checkForEnter(event)">
                    <i class="fa fa-times clear-icon" onclick="clearSearch(this)" style="display: none;"></i>
                </div>
            </div>
            <nav class="main-right">
                <li class="user">
                    <p><i class="fa-solid fa-user user-icon" onclick="redirectTo('user.html')"></i></p>
                </li>
                <li class="bag">
                    <div class="bag-wrapper">
                        <p><i class="fa-solid fa-bag-shopping bag-icon" onclick="redirectTo('bag.html')"></i></p>
                        <p><span class="cost">R$ 0,00</span>
                            <span class="items">0 itens</span>
                        </p>
                    </div>
                </li>
            </nav>
        </section>
    </aside>
    <section id="cardapio">
        <div class="main-content grid-one-content">
            <h2>Cardápio</h2>
            <div class="grid">
                <article class="card">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQi0xygJBZyuM8Jo2dtz5Bza1G9pe4hG2jSOyxTiUDtTedMYwQ8KMo-reRz7_ZOPTOhyiA&usqp=CAU" alt="Comida 1">
                    <h3 class="name-item">Clone de Staker</h3>
                    <h3 class="tag-cost-item">R$<span class="cost-item">40</span>,00</h3>
                </article>
                <article class="card">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQi0xygJBZyuM8Jo2dtz5Bza1G9pe4hG2jSOyxTiUDtTedMYwQ8KMo-reRz7_ZOPTOhyiA&usqp=CAU" alt="Comida 1">
                    <h3 class="name-item">Staker</h3>
                    <h3 class="tag-cost-item">R$<span class="cost-item">20</span>,00</h3>
                </article>
            </div>
        </div>
    </section>

    <!-- Modal -->
    <div id="item-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <img class="modal-image" src="" alt="Item Imagem">
            <div class="modal-info">
                <h3 class="modal-title">Nome do item</h3>
                <p class="modal-ingredients">Ingredientes: </p>
                <div class="modal-ingredients-list">ingredientes</div>
                <div class="modal-extras">
                    <label for="extra">Adicionais:</label>
                    <div class="checkbox-wrapper">
                        <input type="checkbox" name="Calabresa" id="extra1">
                        <label for="Calabresa">Calabresa</label>
                        <input type="checkbox" name="Bacon" id="extra1">
                        <label for="Bacon">Bacon</label>
                    </div>
                </div>
                <div class="modal-observations">
                    <label for="observations">Observações:</label>
                    <textarea id="observations" name="observations"></textarea>
                </div>
                <div class="modal-footer">
                    <div class="modal-quantity">
                        <button type="button" onclick="decreaseQuantity()">-</button>
                        <input type="number" id="quantity" value="1" min="1">
                        <button type="button" onclick="increaseQuantity()">+</button>
                    </div>
                    <button type="button" class="button-add">Adicionar (R$ <span id="item-price">40</span>,00)</button>
                </div>
            </div>
        </div>
    </div>


    <script>
        function toggleClearIcon(input) {
            const clearIcon = input.nextElementSibling;
            clearIcon.style.display = input.value ? 'inline' : 'none';
        }

        function clearSearch(clearIcon) {
            const input = clearIcon.previousElementSibling;
            input.value = '';
            toggleClearIcon(input);
            input.focus();
        }

        function checkForEnter(event) {
            if (event.keyCode === 13) {
                search();
            }
        }

        function search() {
            const input = document.querySelector('[name="search"]');
            const searchTerm = input.value.toLoweCase().trim();
            const items = document.querySelectorAll('.card');

            if(searchTerm.length === 0){
                items.forEach(item=>item.style.display='block');
                return;
            }
        

        const names = Array.from(items).map(item=>item.querySelector('.name-item').textContent.toLoweCase());
        const filtredItems = ((item,Index)=>names[index].includes(searchTerm));
        
        items.forEach(item=>item.style.display='none');
        filtredItems.forEach(item=>item.style.display='block');
    }

        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('click', function () {
                const imageSrc = this.querySelector('img').src;
                const title = this.querySelector('.name-item').textContent;
                const modal = document.getElementById('item-modal');
                modal.querySelector('.modal-image').src = imageSrc;
                modal.querySelector('.modal-title').textContent = title;
                modal.style.display = 'block';
            });
        });

        document.querySelector('.close').addEventListener('click', function () {
            document.getElementById('item-modal').style.display = 'none';
        });

        window.addEventListener('click', function (event) {
            const modal = document.getElementById('item-modal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });

        function increaseQuantity() {
            const quantityInput = document.getElementById('quantity');
            const currentQuantity = parseInt(quantityInput.value);
            quantityInput.value = currentQuantity + 1;
            var itemPrice = document.getElementById('item-price');
            var price = 40;
            itemPrice.innerHTML = price * quantityInput.value;
        }
        
        function decreaseQuantity() {
            const quantityInput = document.getElementById('quantity');
            const currentQuantity = parseInt(quantityInput.value);
            var itemPrice = document.getElementById('item-price');
            var price = 40;
            var atual = quantityInput.value;
            if (currentQuantity > 1) {
                quantityInput.value = currentQuantity - 1;  
                itemPrice.innerHTML =  (atual*price)-price; 
            }             
        }


    </script>
</body>

</html>